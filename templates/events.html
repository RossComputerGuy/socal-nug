{% import "macros/date.html" as date_macros %}
{% extends "child.html" %}

{% block content %}

  <h1 class="title is-1 mb-3">Events</h1>
  <div class="is-multiline event-listing">
    {% for page in section.pages | sort(attribute="extra.event_date") | reverse  %}
      {% set date_parts = page.extra['event_date'] | split(pat="-")%}
      {% set event_month = date_parts[1] | int %}
      {% set event_day = date_parts[2] | int %}
      <div class="event-listing-item" 
        data-event-date="{{ page.extra['event_date'] }}"
        data-event-name="{{ page.title }}"
        data-event-location="{{ page.extra['location'] }}"
        >
        <a href="{{ page.permalink }}">
          <div class="media">
            <div class="media-left">
              {{ date_macros::date_chip(month=event_month, day=event_day) }}
            </div>
            <div class="media-right">
                <h2 class="title" style="margin:0">
                  {{ page.title }}
                </h2>
                <h3>{{ page.extra.event_date }}</h3>
                <h3>{{ page.extra.location }}</h3>
            </div>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
{% endblock content %}